<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- Generated by Apache Maven Doxia Site Renderer 1.4 at 11/02/2016 11:41:24 -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>uispec4j - 
    Calculator example</title>
    <style type="text/css" media="all">
      @import url("./css/maven-base.css");
      @import url("./css/maven-theme.css");
      @import url("./css/site.css");
    </style>
    <link rel="stylesheet" href="./css/print.css" type="text/css" media="print" />
    <meta name="Date-Revision-yyyymmdd" content="20160211" />
    <meta http-equiv="Content-Language" content="en" />
        <meta name="keyword" content="java, junit" />
        </head>
  <body class="composite">
    <div id="banner">
                    <div id="bannerLeft">
                
                </div>
                              <a href="http://uispec4j.org/" id="bannerRight">
                                                <img src="uispec4j.png" alt="UISpec4J" />
                </a>
            <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
            
                    
                <div class="xleft">
        <span id="publishDate">Last Published: 11/02/2016 11:41:24</span>
                  &nbsp;| <span id="projectVersion">Version: 2.5-SNAPSHOT</span>
                      </div>
            <div class="xright">                    <a href="index.html" title="Home">Home</a>
            |
                        <a href="http://www.junit.org" class="externalLink" title="JUnit">JUnit</a>
            |
                        <a href="http://www.extremeprogramming.org" class="externalLink" title="Extreme Programming">Extreme Programming</a>
              
                    
      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="leftColumn">
      <div id="navcolumn">
             
                    
                                <h5>Overview</h5>
                  <ul>
                  <li class="none">
                          <a href="index.html" title="Home">Home</a>
            </li>
                  <li class="none">
                          <a href="goals.html" title="Goals">Goals</a>
            </li>
                  <li class="none">
                          <a href="features.html" title="Features">Features</a>
            </li>
                  <li class="none">
            <strong>Example</strong>
          </li>
                  <li class="none">
                          <a href="gettingstarted.html" title="Getting started">Getting started</a>
            </li>
                  <li class="none">
                          <a href="download.html" title="Download">Download</a>
            </li>
                  <li class="none">
                          <a href="contact.html" title="Contact">Contact</a>
            </li>
          </ul>
                       <h5>Reference</h5>
                  <ul>
                  <li class="none">
                          <a href="apidocs/index.html" title="Javadoc API specification">Javadoc API specification</a>
            </li>
                  <li class="none">
                          <a href="findingcomponents.html" title="Finding components">Finding components</a>
            </li>
                  <li class="none">
                          <a href="assertions.html" title="Using assertions">Using assertions</a>
            </li>
                  <li class="none">
                          <a href="interception.html" title="Intercepting windows">Intercepting windows</a>
            </li>
                  <li class="none">
                          <a href="popupmenus.html" title="Intercepting pop-up menus">Intercepting pop-up menus</a>
            </li>
                  <li class="none">
                          <a href="usingcolors.html" title="Using colors">Using colors</a>
            </li>
                  <li class="none">
                          <a href="extension.html" title="Extending UISpec4J">Extending UISpec4J</a>
            </li>
                  <li class="none">
                          <a href="properties.html" title="Properties">Properties</a>
            </li>
                  <li class="none">
                          <a href="troubleshooting.html" title="Troubleshooting">Troubleshooting</a>
            </li>
          </ul>
                       <h5>Developers</h5>
                  <ul>
                  <li class="none">
                          <a href="contributing.html" title="Contributing">Contributing</a>
            </li>
                  <li class="none">
                          <a href="developing.html" title="Checkout & build">Checkout & build</a>
            </li>
                  <li class="none">
                          <a href="codingrules.html" title="Coding rules">Coding rules</a>
            </li>
          </ul>
                       <h5>Project Documentation</h5>
                  <ul>
                                                                                                                                                                                                                                                        <li class="collapsed">
                          <a href="project-info.html" title="Project Information">Project Information</a>
                  </li>
                                                                                                                                                                                <li class="collapsed">
                          <a href="project-reports.html" title="Project Reports">Project Reports</a>
                  </li>
          </ul>
                                                                                                                                     <a href="http://www.crossbowlabs.com/" title="CrossbowLabs" class="poweredBy">
        <img class="poweredBy"  alt="CrossbowLabs" src="images/logos/poweredbycrossbowlabs.jpg"     />
      </a>
                       
                    
            </div>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">
        
  
    
<div class="section">
<h2>Example<a name="Example"></a></h2>
      
<div class="section">
<h3>Overview<a name="Overview"></a></h3>
        
<p>
          To illustrate UISpec4J's usage, let's consider a very simple application:
          a &quot;calculator&quot; utility looking like this:
        </p>
        <center>
          
        </center>
        
<p>
          In this page, we use this simple application to explore three different UISpec4J usage
          strategies, or rather three maturity stages of a functional tests suite:
          </p>
<ul>
            
<li>
              <a href="#Stage_1:_Fine-grained_tests">Fine-grained tests</a> reproducing interactions
              with the individual GUI components.
            </li>
            
<li>
              <a href="#Stage_2:_Business_scripts">Business scripts</a> where higher-level APIs are
              built on top of UISpec4J to produce a kind of domain-specific language.
            </li>
            
<li>
              <a href="#Stage_3:_Data_sheets">Data sheets</a> representing the inputs and outputs
              of the application, bound to the user interface with a custom engine based on UISpec4J.
            </li>
          </ul>
        
      </div>

      
<div class="section">
<h3>Stage 1: Fine-grained tests<a name="Stage_1:_Fine-grained_tests"></a></h3>
        
<p>
          This is the direct approach: in a JUnit test, a fine-grained sequence of interactions is
          reproduced using the UISpec4J APIs:
        </p>
        
<div class="source">
<pre>
            
  public void testSimpleAddition() {
    Panel calculatorPanel = getMainWindow();
    calculatorPanel.getButton(&quot;2&quot;).click();
    calculatorPanel.getButton(&quot;+&quot;).click();
    calculatorPanel.getButton(&quot;3&quot;).click();
    calculatorPanel.getButton(&quot;=&quot;).click();
    assertTrue(calculatorPanel.getTextBox().textEquals(&quot;5&quot;));
  }
        </pre></div>
        
<p>
          This approach is suited to very simple applications. However, as the application matures and
          the number of tests increases, the test suite becomes less and less readable and maintainable.
          It is then time to consider switching to stage 2.
        </p>
      </div>

      
<div class="section">
<h3>Stage 2: Business scripts<a name="Stage_2:_Business_scripts"></a></h3>
        
<p>
          In this approach, the basic tests of stage 1 are progressively refactored, resulting in the
          emergence of testing utilities which make the tests themselves more compact:
        </p>
        
<div class="source">
<pre>
          
  public void testDisplay() {
    Calculator calc = new Calculator(this);
    calc.checkSequence(&quot;1&quot;, &quot;1&quot;);
    calc.checkSequence(&quot;123&quot;, &quot;123&quot;);
    calc.checkSequence(&quot;123+&quot;, &quot;123&quot;);
    calc.checkSequence(&quot;123+4&quot;, &quot;4&quot;);
    calc.checkSequence(&quot;123+456&quot;, &quot;456&quot;);
  }

  public void testSimpleAddition() {
    Calculator calculator = new Calculator(this);
    calc.checkAddition(&quot;2&quot;, &quot;3&quot;, &quot;5&quot;);
    calc.checkAddition(&quot;12&quot;, &quot;34&quot;, &quot;46&quot;);
  }
        </pre></div>
        
<p>
          The tests themselves are not written with UISpecJ anymore: they are based on high-level
          abstractions. At this stage, UISpec4J is no longuer used as a testing framework
          per se: it is used instead as a tool for binding business-level tests to a specific
          GUI implementation.
        </p>
        
<p>
          Here is the corresponding Calculator implementation:
        </p>
        
<div class="source">
<pre>
  private class Calculator {
    private Window window;

    public Calculator(UISpecTestCase test) {
      this.window = test.getMainWindow();
    }

    public void checkSequence(String keySequence, String resultingDisplay) {
      for (int i = 0, max = keySequence.length(); i &lt; max; i++) {
        window.getButton(keySequence.substring(i, i + 1)).click();
      }
      assertTrue(window.getTextBox().textEquals(resultingDisplay));
      window.getButton(&quot;C&quot;).click();
    }

    public void checkAddition(String operand1, String operand2, String result) {
      check(operand1 + &quot;+&quot; + operand2 + &quot;=&quot;, result);
    }
  }
        </pre></div>
        
<p>
          Even though it is a significant improvement over stage 1, this stage still produces
          <i>scripts</i>, which are suited to complex interactions but might be a little hard
          to implement for people in charge of the specifications of the product. That is where
          stage 3 comes into play.
        </p>
      </div>

      
<div class="section">
<h3>Stage 3: Data sheets<a name="Stage_3:_Data_sheets"></a></h3>
        
<p>
          At this stage, the test data may be produced by the customer team itself, using data files
          such as this one:
        </p>
        
<div class="source">
<pre>
  1+1=,2
  1,1
  123,123
  123+,123
  123+4,4
  123+456,456
  2+3=,5
  12+34=,46
        </pre></div>
        
<p>
          UISpec4J is then used for writing a piece of code which reads the data from the file
          and performs the corresponding actions on the GUI. <br />
          Since you are writing the interpreting code, you can choose any file format: CSV, XML, etc.
          You can also use third party testing frameworks such as
          <a class="externalLink" href="http://www.fitnesse.org">Fitnesse</a> to let the customer team
          write their own tests and run them in a Wiki.
        </p>
      </div>
    </div>
  

      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">
              Copyright &#169;                   2004-2016.
          All Rights Reserved.      
                    
                  </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>
